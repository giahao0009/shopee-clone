import{c as a,j as e,L as b,p,e as w,f as x,u as _,g as L,r as A,a as B,o as P,C as j,h as F,B as k,s as M,l as C,k as W,m as G,n as S,P as z,q as D}from"./index-1c52aa98.js";const g=2;function E({queryConfig:t,pageSize:n}){const r=Number(t.page),d=()=>{let c=!1,u=!1;const o=m=>u?null:(u=!0,e("span",{className:"mx-2 min-w-[35px] cursor-pointer rounded-md bg-white p-2 capitalize shadow-lg",children:"..."},m)),h=m=>c?null:(c=!0,e("span",{className:"mx-2 min-w-[35px] cursor-pointer rounded-md bg-white p-2 capitalize shadow-lg",children:"..."},m));return Array(n).fill(0).map((m,l)=>{const i=l+1;if(r<=g*2+1&&i>r+g&&i<n-g+1)return h(l);if(r>g*2+1&&r<n-g*2){if(i<r-g&&i>g)return o(l);if(i>r+g&&i<n-g)return h(l)}else if(r>=n-g*2&&i>g&&i<r-g)return o(l);return e(b,{to:{pathname:p.home.link,search:w({...t,page:i.toString()}).toString()},className:x("mx-2 min-w-[35px] cursor-pointer rounded-md p-2 text-center capitalize shadow-lg",{"bg-orange text-white":i===r,"bg-white":i!==r}),children:i},l)})};return a("div",{className:"mt-6 flex flex-wrap justify-center",children:[r===1?e("span",{className:"mx-2 cursor-not-allowed rounded-md bg-white p-2 capitalize shadow-lg",children:"Prev"}):e(b,{to:{pathname:p.home.link,search:w({...t,page:1 .toString()}).toString()},className:"mx-2 cursor-pointer rounded-md bg-white p-2 capitalize shadow-lg",children:"Prev"}),d(),r===n?e("span",{className:"mx-2 cursor-not-allowed rounded-md bg-white p-2 capitalize shadow-lg",children:"Prev"}):e(b,{to:{pathname:p.home.link,search:w({...t,page:(r+1).toString()}).toString()},className:"mx-2 cursor-pointer rounded-md bg-white p-2 capitalize shadow-lg",children:"Next"})]})}function I({queryConfig:t}){const n=_(),r=d=>{n({pathname:p.home.link,search:w({...t,rating_filter:String(d)}).toString()})};return e("ul",{className:"my-3",children:Array(5).fill(0).map((d,c)=>e("li",{className:"py-1 pl-2",children:a("div",{className:"mb-2 flex cursor-pointer items-center text-sm",onClick:()=>r(5-c),"aria-hidden":"true",role:"button",children:[Array(5).fill(0).map((u,o)=>o<5-c?a("svg",{viewBox:"0 0 9.5 8",className:"mr-1 h-4 w-4",children:[a("defs",{children:[a("linearGradient",{id:"ratingStarGradient",x1:"50%",x2:"50%",y1:"0%",y2:"100%",children:[e("stop",{offset:0,stopColor:"#ffca11"}),e("stop",{offset:1,stopColor:"#ffad27"})]}),e("polygon",{id:"ratingStar",points:"14.910357 6.35294118 12.4209136 7.66171903 12.896355 4.88968305 10.8823529 2.92651626 13.6656353 2.52208166 14.910357 0 16.1550787 2.52208166 18.9383611 2.92651626 16.924359 4.88968305 17.3998004 7.66171903"})]}),e("g",{fill:"url(#ratingStarGradient)",fillRule:"evenodd",stroke:"none",strokeWidth:1,children:e("g",{transform:"translate(-876 -1270)",children:e("g",{transform:"translate(155 992)",children:e("g",{transform:"translate(600 29)",children:e("g",{transform:"translate(10 239)",children:e("g",{transform:"translate(101 10)",children:e("use",{stroke:"#ffa727",strokeWidth:".5",xlinkHref:"#ratingStar"})})})})})})})]},o):a("svg",{viewBox:"0 0 30 30",className:"mr-1 h-4 w-4",children:[e("defs",{children:a("linearGradient",{id:"star__hollow",x1:"50%",x2:"50%",y1:"0%",y2:"99.0177926%",children:[e("stop",{offset:"0%",stopColor:"#FFD211"}),e("stop",{offset:"100%",stopColor:"#FFAD27"})]})}),e("path",{fill:"none",fillRule:"evenodd",stroke:"url(#star__hollow)",strokeWidth:2,d:"M23.226809 28.390899l-1.543364-9.5505903 6.600997-6.8291523-9.116272-1.4059447-4.01304-8.63019038-4.013041 8.63019038-9.116271 1.4059447 6.600997 6.8291523-1.543364 9.5505903 8.071679-4.5038874 8.071679 4.5038874z"})]},o)),c!==0&&e("span",{children:"Trở lên"})]})},c))})}function R(t){var N;const{type:n,onChange:r,className:d,classNameInput:c="w-full rounded-sm border border-gray-300 p-3 outline-none focus:border-gray-500",classNameError:u="mt-1 min-h-[1.5rem] text-sm text-red-600",value:o="",...h}=t,{field:m,fieldState:l}=L(t),[i,f]=A.useState(m.value),s=v=>{const y=v.target.value;(n==="number"&&(/^\d+$/.test(y)||y==="")||n!=="number")&&(f(y),m.onChange(v),r&&r(v))};return a("div",{className:d,children:[e("input",{...h,...m,value:o||i,className:c,onChange:v=>s(v)}),e("div",{className:u,children:(N=l.error)==null?void 0:N.message})]})}const T=M.pick(["price_min","price_max"]);function V({queryConfig:t,categories:n}){var f;const{category:r}=t,{control:d,handleSubmit:c,trigger:u,formState:{errors:o}}=B({defaultValues:{price_min:"",price_max:""},resolver:P(T),shouldFocusError:!1}),h=s=>s===r,m=_(),l=c(s=>{m({pathname:p.home.link,search:w({...t,price_max:s.price_max,price_min:s.price_min}).toString()})}),i=()=>{const s=w(C.omit(t,["price_min","price_max","rating_filter","category"])).toString();m({pathname:p.home.link,search:s})};return a("div",{className:"py-4",children:[a(b,{to:p.home.link,className:"flex items-center font-bold",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6- mr-3 h-6 fill-current",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),"Tất cả danh mục"]}),e("div",{className:"my-4 h-[1px] bg-gray-300"}),e("ul",{children:n&&n.map(s=>e("li",{className:"py-2 pl-2",children:a(b,{to:{pathname:p.home.link,search:w({...t,category:s._id}).toString()},className:x("relative px-2",{"font-semibold text-orange":h(s._id),"text-black":!h(s._id)}),children:[e("svg",{viewBox:"0 0 4 7",className:x("absolute left-[-10px] top-1 h-2 w-2",{"fill-orange":h(s._id),"fill-black":!h(s._id)}),children:e("polygon",{points:"4 3.5 0 0 0 7"})}),s.name]})},s._id))}),a(b,{to:p.home.link,className:"mt-4 flex items-center font-bold",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6- mr-3 h-6",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 01-.659 1.591l-5.432 5.432a2.25 2.25 0 00-.659 1.591v2.927a2.25 2.25 0 01-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 00-.659-1.591L3.659 7.409A2.25 2.25 0 013 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0112 3z"})}),"Bộ lọc tìm kiếm"]}),e("div",{className:"my-4 h-[1px] bg-gray-300"}),a("div",{className:"my-5",children:[e("div",{children:"Khoản giá"}),a("form",{className:"mt-2",onSubmit:l,children:[a("div",{className:"flex items-start",children:[e(R,{control:d,name:"price_min",type:"number",className:"grow",placeholder:"₫ TỪ",classNameInput:"w-full rounded-sm border border-gray-300 p-1 outline-none focus:border-gray-500",onChange:()=>{u("price_max")}}),e("div",{className:"mx-2 mt-2 shrink-0",children:"-"}),e(j,{control:d,name:"price_max",render:({field:s})=>e(F,{type:"text",className:"grow",name:"to",placeholder:"₫ ĐẾN",classNameError:"hidden",classNameInput:"w-full rounded-sm border border-gray-300 p-1 outline-none focus:border-gray-500",onChange:N=>{s.onChange(N),u("price_min")},value:s.value,ref:s.ref})})]}),e("div",{className:"mt-1 min-h-[1.25rem] text-center text-sm text-red-600",children:(f=o.price_min)==null?void 0:f.message}),e("button",{type:"submit",className:"w-full bg-orange p-2 uppercase text-white hover:opacity-90",children:"Áp dụng"})]})]}),e("div",{className:"my-4 h-[1px] bg-gray-300"}),e("div",{className:"text-sm",children:"Đánh giá"}),e(I,{queryConfig:t}),e("div",{className:"my-4 h-[1px] bg-gray-300"}),e(k,{onClick:i,className:"w-full bg-orange p-2 text-sm uppercase text-white hover:opacity-90",children:"Xoá tất cả"})]})}function K({queryConfig:t,pageSize:n}){const r=Number(t.page),{sort_by:d="createdAt",order:c}=t,u=_(),o=l=>d===l,h=l=>{u({pathname:p.home.link,search:w(C.omit({...t,sort_by:l},["order"])).toString()})},m=l=>{u({pathname:p.home.link,search:w({...t,sort_by:"price",order:l}).toString()})};return e("div",{className:"bg-gray-300/40 px-3 py-4",children:a("div",{className:"flex items-center justify-between gap-2",children:[a("div",{className:"flex flex-wrap items-center gap-2",children:[e("div",{className:"text-sm",children:"Sắp xếp theo"}),e(k,{onClick:()=>h("view"),className:x("uppercas rounded-s px-3 py-2 text-sm",{"bg-orange text-white":o("view"),"bg-white text-black":!o("view")}),children:"Phổ biến"}),e(k,{onClick:()=>h("createdAt"),className:x("uppercas rounded-s px-3 py-2 text-sm",{"bg-orange text-white":o("createdAt"),"bg-white text-black":!o("createdAt")}),children:"Mới nhất"}),e(k,{onClick:()=>h("sold"),className:x("uppercas rounded-s px-3 py-2 text-sm",{"bg-orange text-white":o("sold"),"bg-white text-black":!o("sold")}),children:"Bán chạy"}),a("select",{className:x("rounded-sm border border-gray-300 bg-gray-50 p-2.5 text-sm outline-none",{"bg-orange text-white hover:bg-orange/80":o("price"),"bg-white text-black hover:bg-white/80":!o("price")}),value:c||"",onChange:l=>m(l.target.value),children:[e("option",{selected:!0,value:"",disabled:!0,className:"bg-white text-black",children:"Giá"}),e("option",{value:"asc",className:"bg-white text-black",children:"Giá: Thấp đến cao"}),e("option",{value:"desc",className:"bg-white text-black",children:"Giá: Cao đến thấp"})]})]}),a("div",{className:"flex items-center gap-2",children:[a("div",{className:"text-sm",children:[e("span",{className:"text-orange",children:r}),a("span",{children:["/",n]})]}),a("div",{children:[r===1?e("span",{className:"inline-block border-spacing-1 cursor-not-allowed border bg-gray-100 p-1 opacity-50",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-6 w-6",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}):e(b,{to:{pathname:p.home.link,search:w({...t,page:(r-1).toString()}).toString()},className:"inline-block border-spacing-1 border bg-white p-1",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-6 w-6",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})})}),r===n?e("span",{className:"inline-block border-spacing-1 cursor-not-allowed border bg-gray-100 p-1",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-6 w-6",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})}):e(b,{to:{pathname:p.home.link,search:w({...t,page:(r+1).toString()}).toString()},className:"inline-block border-spacing-1 border bg-white p-1",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-6 w-6",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})})})]})]})]})})}const Q="categories",H={getCategories(){return W.get(Q)}};function X(){const t=G(),{data:n}=S({queryKey:["product",t],queryFn:()=>D.getProducts(t),keepPreviousData:!0,staleTime:3*60*1e3}),{data:r}=S({queryKey:["categories"],queryFn:()=>H.getCategories()});return e("div",{className:"bg-gray-200 py-6 ",children:e("div",{className:"container",children:n&&a("div",{className:"grid grid-cols-12 gap-6",children:[e("div",{className:"col-span-2",children:e(V,{categories:(r==null?void 0:r.data.data)||[],queryConfig:t})}),a("div",{className:"col-span-10",children:[e(K,{queryConfig:t,pageSize:n.data.data.pagination.page_size}),e("div",{className:" mt-6 grid grid-cols-2 gap-3 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5",children:n.data.data.products.map((d,c)=>e("div",{className:"col-span-1",children:e(z,{product:d})},c))}),e(E,{queryConfig:t,pageSize:n.data.data.pagination.page_size})]})]})})})}export{X as default};
